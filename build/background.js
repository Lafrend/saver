(()=>{"use strict";function e(e){let t;t=e.selectionText||e.srcUrl||e.linkUrl||e.videoUrl||"";const n={createdAt:(new Date).getTime(),title:"",itemData:t,pinned:!1,hide:!1,fav:!1,color:"",tab:"",list:""};var o;o=n,console.log("Saving new item:",o),chrome.storage.local.get("yourItemList",(function(e){const t=e.yourItemList||[],n=t.findIndex((e=>e.createdAt===o.createdAt));-1!==n&&t.splice(n,1),t.push(o),chrome.storage.local.set({yourItemList:t},(function(){console.log("Item saved successfully:",o)}))}))}chrome.runtime.onInstalled.addListener((function(){chrome.storage.local.get("yourItemList",(function(e){const t=e.yourItemList||[];console.log("Loaded items:",t)}))})),chrome.runtime.onInstalled.addListener((function(){chrome.contextMenus.create({title:"Сохранить",id:"save",contexts:["selection","image","video","link"]})})),chrome.contextMenus.onClicked.addListener((function(t,n){"save"==t.menuItemId&&e(t)})),chrome.commands.onCommand.addListener((function(e){"saveItemCommand"===e&&chrome.tabs.query({active:!0,currentWindow:!0},(function(e){const t=e[0];chrome.tabs.sendMessage(t.id,{command:"getSelectedText"})}))})),chrome.runtime.onMessage.addListener((function(t,n,o){"saveItem"===t.command&&t.selectedText&&e({selectionText:t.selectedText,createdAt:""})}))})();
//# sourceMappingURL=background.js.map